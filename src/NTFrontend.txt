==========================================
 NDS rom tool Frontend (NTFrontend) v1.70
 by sin_sin
 Latestly built on 2007-12-8
 Documented on 2007-12-8, 20:11
------------------------------------------

 关于ndstool和NTFrontend
-------------------------
    Nintendo DS rom tool(ndstool.exe)是一个用于查看、处理、分解、整合Nintendo DS
游戏ROM头部及内部文件系统数据的Windows控制台工具。
    NTFrontend是一个运行于Windows系统下的NDS rom tool图形界面前端工具。
    前端NTFrontend将ndstool的控制台命令行操作简化为Windows标准GUI对话操作，主要
为提取、收集NDS ROM头部数据提供便利。也提供对ROM文件系统的查看、分解、整合等提供
支持。主要功能依赖于ndstool本身，所以对于banner图标、文本等只提供简单支持。
    ndstool目前版本为2007/10编译的v1.36，网上流行版本为v1.31，目前以v1.3以上为主
要支持对象。由于旧版本差异较大，如果要使用其它的请做好BUG多多的心理准备XD 又因为
v1.36文件大小比v1.33大了一倍多，所以包内仍然附送v1.33囧rz

 NTFrontend目前特性
--------------------
·提供ROM Header信息的收集和校验，支持-i开关和-v选项
·支持zip、rar和7z压缩的ROM（自动解压到临时文件夹）
·支持ROM的Secure Area加密或解密（-s开关）
·支持ROM的Header CRC修复（-f开关）
·支持ROM文件系统的浏览（-l开关）和分解（-x开关）
·支持ROM的重整合（-c开关）
·Banner图标和文本的读取、显示与保存，这里开始已经和ndstool无关了
·Banner的图标和文本以及游戏标识的修改（不通过ndstool）
·扫描文件夹，并读取所有找到的ROM的Header的自动过程
·一张用于收集Header信息并能自定义表列标题的数据表
·ROM文件的缩减，缩减到安全大小
·支持给ROM打IPS补丁，IPS1/IPSPro受付中
·支持给需要用FATLib驱动的自制软件打“流行性”DLDI补丁
·支持给ROM打BSD补丁（通过bspatch）
·其它附加小功能，为ROM“用户”提供小贴士
·控制台日志将被一一记录，除了查看还可以随时复制到剪贴板或清除
·支持界面从5种语言切换，目前有英、简中、繁中，谁帮偶加点啊～
·支持仿XP界面控件效果
·-p开关和-k开关由于未经测试也很少使用，决定不予以支持

 NTFrontend期待添加特性
------------------------
·暂无
有意见/建议请从下面所提到的渠道反馈。偶网渣，渠道有限，见谅囧rz
一直忘了说，E语言源码不素文本来的，而且版本差异也不小，不方便公开。
虽然并不值一看（0注释的-v-），但是如果真想要源码的话也可以找偶邮一份滴。

 NTFrontend已知并暂时不想/不能解决的BUG
----------------------------------------
·注意ndstool的-se开关也就是Secure Area加密并不是完全的，可以看到它自己加密都自
称为“mask ROM”而不是“encrypted”。目前版本使用的Nintendo加mask功能和某淫写那
个eNDryptS Advanced v1.2加密得到的SA并不一样……所以如果想要真SA encrypted的话，
还是用那个比较好。
·ndstool本身较旧的原因，个别特殊的header会不能正常识别，主要体现在缺失部分字段
的枚举信息。不过如果偶遇到过的话就会加上相应的识别的。如果你去打开别的什么文件出
现乱子偶可不负责XD
·特别要注意在打开DEMO、homebrew之类，特别是加上了SC loader等不明物体的ROM文件（
比如*.sc.nds）时，如果也勾上了Verbose（-v选项），由于ndstool本身的问题，将会导致
系统内存无限的被吞噬造成程序假死……这时请立即打开任务管理器taskmgr将ndstool.exe
进程强制结束，否则你物理内存装多少也不够它花的-v-
·正因为上面那条原因……想要给加了SC、M3 loader的ROM加图标也不能直接实现，虽然知
道仅仅只是偏移512字节，但ndstool不能提供有效的数据全得自己取的话……干脆就别当它
的前端自立门户算了莔 所以偶……忍了！
·由于使用了WideCharToMultiByte，像日文SJIS里那个半角的“·”，注册商标“TM”等
类似符号在简体系统下必然是个“?”，这点就表奇怪了囧 （现在可以通过另存为Unicode
文本文件来暂时解决）

 Special Thanks
----------------
    还是那句，感谢所有辛勤劳作者XD，感谢ndstool的作者（们），感谢帮偶测试的
sammychen、redalertwei、ffsky……感谢父母、感谢国家、感谢党、感谢CCTV、感谢……
#@$#%@!@#$#@$

 下载、问题反馈与建议
----------------------
http://sinsin.blog.edu.cn
http://www.ndsbbs.com
http://sinblog.512j.com/pmwiki/index.php/OLData/NTFrontend

 NTFrontend更新日志
--------------------
2007-12-7	v1.70
·新增：扫描过程的详细记录志和控制台日志的自动保存。。。只要程序目录下有个叫
NTFrontend.Console.log的文件，日志就会在里面了。要小心别让文件变得太大哦-v-
·变更：好久没更新过devkitARM，r20、r21对偶来说竟然都是新的。。。于是就把
ndstool.exe换成1.33的了，其实对偶来说没有什么本质上的区别嘛-_-
·变更：File Explorer的搜索从全选择式改为一条条逐一搜索，每按一次^F会去找下一个，
遍历完后显示会定位在列表末尾。原来的全选式关联到^L键上了
·变更：Banner小窗的背景图换了个用No$GBA截的，颜色实在是不够真实，而且偶想要日版
画面的说-.-
·更新：更新了Publisher和Wiki连接。提前祝X'mas和Happy New Year！

2007-9-22	v1.69
·新增：隐藏参数，用来提取压缩包中的某些文件，比如diz、nfo之类
·新增：应该是补完位于0x1F处的Flags字段，还有0x88位置上的一个未知值，最近的ROM都
出现有数值，意义还不明中~_~ 其它一些不确定的字段名称也参考NDSTech改了改
·新增：传说中的“Wi-Fi”使用判断，以前没发现，原来所有trim到安全大小的这种都正
好只多136bytes啊，不早说。。。总之Download Play本来就没问题的，现在多个标志而已
·新增：“真正的”Nintendo Wi-Fi Connection识别，其实方法很简单。。。就是看看
arm9里有没有Nitro WiFi SDK而已
·变更：显示图标的小窗背景图没有清晰版，又懒得自己画，处理了一下颜色，还原成灰色
·修正：打不上BSD补丁的一个BUG
·修正：trimmer在通过FAT识别时可能出错的BUG
·修正：Banner标题另存为时一个文本识别上的BUG

2007-8-24	v1.68
·新增：图标标题文本可以另存为常用Unicode(UTF-16LE)编码的文本文件，在Banner小窗
口的菜单里调用，可以好好看看棒子的文本咯-v-
·新增：两个“隐藏”参数，可以在扫描ROM时自动将Banner图标和标题文本也保存下来。
提示是看看新的INI里多了点什么。。。另一个提示是新建一个Unicode文本文件看看，文件
名叫Nitro DS Banner Text Collection.txt
·变更：为了对付XPA流的rar+zip包档，现在打开zip后发现没.nds只有.r??的也会自动先
把RAR解压再打开ROM了。不过这样那些后续操作是不会把修改过的ROM压回到RAR里的哦
·修正：由于文件锁定造成临时文件夹清理不彻底使得打开新ROM时会出现Picker的BUG
·修正：其它BUG。。。时间久了，又没作记录。。。忘鸟TAT 貌似修改Banner有BUG，不过
没人报告过，偶就懒得测试了=A=
·更新：新Publisher多了不少- - 虽然是INI更新，总之这个也算一条吧。。。

2007-7-30	v1.67
·变更：用易4.05重新编译了主程序，内嵌的dp1.fne等库暂时都还没再发现被卡某、诺某
等误报的情况
·变更：缩减ROM大小的算法加入了通过FNT&FAT的判断，某些ROM也能正确被缩减了
·变更：平台日志背景改黑色。。。主要是偶现在的显示器破得实在是太可怕鸟OMG
·变更：列表框的排序算法改成了SHELL，比泡泡小小快一点点XD
·修正：一个变量作用域的变化引起的分解ROM文件不能的BUG

2007-6-20	v1.66
·新增：文件MD5计算，Banner版本收集，Header前512字节的Checksum16。MD5主要为CRC32
提供补充的完整性检查，Header Info页的ARM7 bin hash现在改为显示File MD5。Banner版
本主要是方便检查以前提到的像韩版ROM的8文本Banner。Header512的16位校验和与CRC32补
码类似是为SuperCard的金手指准备的GameID一样的东西。还有一个是Header的Magic，其实
是前512字节初值为0的CRC16，正常ROM的值恒定为0xBB41
要注意的是：由于要计算MD5，所以打开ROM的速度更慢了。。。还有可能和旧版的INI内容不
兼容，要记得连INI文件一起更新

2007-5-23	v1.65
·新增：调用模拟器功能，Options相应增加模拟器路径等选项。将模拟器程序设置好，原
“加/解密SA数据区”按钮就变为调用按钮。SA加密功能并未取消，可以到Advanced Mode里
实现。“Needs Encrypted ROM”选项主要为No$GBA模拟器准备，使用No$GBA时请勾上。这
样如果ROM尚未加密会预先将临时目录下的ROM处理为mask ROM再调用No$GBA去运行。注意想
要保留游戏.sav的请到系统临时目录下查找或者打开前手工将ROM解压出来

2007-5-16	v1.64
·变更：XML编辑框中的saveType改为有预存值的下拉列表
·变更：XML编辑框中language会跟随location产生默认值
·修正：XML编辑框中检查非法字符的BUG
·修正：DLDI补丁时无法正确找到用长文件名命名的.dldi驱动文件BUG

2007-5-14	v1.63
·新增：添加Advanced Mode中的XML数据编辑框，快捷键是^M。本来是为方便某淫更新
OfflineList Data，其实偶觉得一点也不方便……
·新增：添加压缩包文件Picker。压缩包内存在多个.nds、.ids或者.ips、.bdf等文件时，
以前只会使用第一个被找到的文件，现在解压后会弹出对话框请求选择文件。不过还是要提
醒的说，如果压缩包里的文件被放在了子文件夹下的话，还是不会被搜索到。所以这也告诉
各位整理ROM之流时不要在包里套包或者包内套子目录的道理-0-
·变更：发现韩版的ROM里连Banner都与众不同，里面有8套标题文本，第8套是韩语的……
现在加入了读取支持到Banner小窗里，不过由于韩文字符不在我们的字符集里，所以转换内
码后都是显示问号。有理由相信，韩国发售的DS/DSL一定也和IDS类似，固件是有变化的。
不知道第7号文本是为哪种语言准备的，反正不是中文-_-b
·变更：更新了几个INI里的Publisher设置
·修正：改变了取DOS格式短文件名的方法，找不到文件的情况应该会减少
·修正：扫描目录时不会识别rar包和7z包的汗颜BUG（反正也没什么人会用这个……）
·修正：搜索压缩包内的BSD补丁时不是搜索*.bdf而是*.bsf的BUG……打错字真可怕|||
·修正n个BUG- -||| 这些天遇到问题就弄一点，过了几天后自己都忘了……总之修正……

2007-5-7	v1.62
·添加BSD打补丁支持。主要应用于BSD操作系统上的二进制文件比较补丁工具BSDiff由于有
人移植到了win32上，所以现在被老外们广泛用于取代不支持大文件的IPS补丁。不幸的是
bspatch不但只有命令行工具，而且工具本身也不太友好= =||| 还需要用到Windows下不常
用的bzip2压缩工具……总之先作为这东西的前端给不方便用控制台，又不想去下别的英文
前端的朋友将就用用吧。需要用到的文件都一同打包，还是那句，如果嫌这些文件杂乱繁多
的话删掉也可以的，不影响其它功能的使用。还要注意的是如果压缩包里的补丁文件不止一
个的话还是要手动解包再指定想打的补丁文件才行，IPS补丁的情况也同样
·修正打开IPS补丁时忘了加入7z解压支持的BUG

2007-5-4	v1.61
·添加7-Zip支持。用的是官方提供的命令行工具7za.exe或者7zr.exe，一起打包发布。加
上DLDI，已经成了不少命令行的“前端”鸟……嫌这么多exe跟着烦，想不要它们其实也没
所谓的-_- 只不过是不能解压7z包之类罢了，随个人口味自己定制吧。GNU那堆东东就不想
附带了，7z的官网请劳烦问问谷歌先生就好……
·几处小修改。比如给RAR包修复SA或者Header后虽然不能压回到原包，但会复制一份修复
过的.nds文件到原RAR包所在目录。

2007-5-3	v1.60
·添加Banner图标、文本修改，游戏标识修改。在Banner小窗内操作，从弹出菜单里进入。
目前图标只支持32x32x16色的未压缩位图(*.bmp)，之后看看转换支持库能不能实现其它格
式图片的导入……文本最多3行，每行宽度“不限”，总共不超过128个文字就行。修改后会
自动调整Header中的参数及各部分CRC值。主要可以用于给homebrew之流添加Banner图标。
游戏标识包括内部标题、游戏代码和厂商代码的修改，内部标题最多12个字符，自制软件是
一串特殊标识；游戏代码商业游戏由Nintendo决定，自制软件一般是“####”；厂商代码也
只有商业游戏需要，具体可以对照INI参考，自制软件一般留空。要注意的是RomeR改过的文
件这里会写入“KX”作为标志。同样的NTFrontend在修改这类东东之后也修改了一个地方作
为“标志位”，不然以假乱真可不好XD
·添加批量打DLDI补丁。自动将DLDI驱动目录下找到的DLDI文件统统打到指定ROM上，并且
每打一个会复制一份并重命名为“原ROM名_DLDI驱动文件名.NDS”。这个是给某懒人专门弄
的XD

2007-5-1	v1.51
·修正几个不影响使用的小错误，主要是想五一这天出51……

2007-5-1	v1.50
·添加RAR压缩包的解压支持。需要用到官方库文件unrar.dll，已经封装到了一起。有没有
BUG未知中，待测……
·添加IPS打补丁支持。Advanced Mode快捷键是^K。目前支持IPS1（支持RLE，只能补到16M
以内的空间）和IPSPro（阿一扩展的1.1版，支持2G以内大文件的补丁）两种。由于要向磁
盘写入补丁后的新文件，所以速度会比较慢，不过换来的是无论ROM文件还是IPS文件都可以
免手动解压，直接GO～！
·添加DLDI补丁页。Advanced Mode也有快捷键是^D。相当于从ndstool前端加成dlditool前
端了……打补丁必要的条件自然是dlditool.exe和补丁文件*.dldi们。dlditool.exe偶就一
起打包了，补丁文件的话还是根据自己需要和实际情况去下载最新版本吧。需要提醒的是由
于ndstool那个BUG的原因，如果在切换到该页下才打开ROM文件，程序会自动把首页那个
Verbose（-v选项）去掉，以避免因BUG导致“死机”-_- 还有是如果打开的是压缩包，将不
会修改压缩包而是在补丁后将.nds文件复制一份到压缩包所在目录-0-
·将Show Banner快捷方式加入到基本信息页，不需要修复Header时，那个按钮现在就是显
示图标了
·修改其它几个小的程序行为，人性化最高-v-

2007-4-26	v1.42
·添加Frontend命令行参数支持。%1就是将要打开的ROM文件名。虽然GUI工具不需要去执行
命令行，不过文件的拖放和关联之类还是会用到的

2007-4-25	v1.41
·修正几个小BUG，优化了代码和速度，去掉了2个作用不大的支持库。现在编译出来的bin
减小了不少，不过也许会出现原本没有的新BUG-_- 其实是昨天弄的……忘了更新囧

2007-4-24	v1.40
·添加Advanced Mode中的金手指GameCode计算。快捷键是^G。因为PAR老兄用的是游戏前
512字节的CRC32补码作为识别GameCode，所以要得到还是需要专门的小工具的。计算出来后
代码会自动复制到剪贴板。（PS，Header前512字节的CRC32补码也加入了列标题，可以通过
选择列加入到表格中）
·添加Logo、Header、Banner的CRC16计算，Verbose选中的情况下，原本只根据ndstool校
验是否“OK”的地方现在有了计算出来的“当前值”。当然只要和Header里预存值相等那就
是叫做OK啦
·修正了一个行号BUG……

2007-4-23	v1.37
·添加Advanced Mode的行排序。早就要加的，一直忘了……点击列表头按钮即可，顺序会
在大->小和小->大之间切换。简单冒泡算法，行多了的话速度就没保证了……
·Advanced Mode保存列表时应求加入了表头，导入到Excel时请选择有列标题选项
·添加File Explorer的文件查找。用Ctrl+F可以搜索不区分大小写的文件名和路径，找到
的项目会被自动选中
·既然可以多选，还是把提取文件数改成了复数。现在提取选中文件就是选中哪些就提取哪
些了。如果全选的话等效于提取所有Data文件（会自动重定向调用，一个个提效率太低）。
顺便增大了Log保留行数，现在是5500行……

2007-4-22	v1.36
·添加拖放文件支持。现在可以把ROM或者压缩包文件从“我的电脑”里拖上工具窗口了。
要注意的是NTFrontend和ndstool都不对文件扩展名及内容格式作合法性检查，所以如果拖
上别的什么乱七八糟的文件上去也是可能实现的，并且后果要自负喔XD
·改进File Explorer和Log快捷键。File Explorer现在改成可以多选，双击左键或按^A可
以全选所有文件，右击鼠标复制选中的项目文件路径+文件名到剪贴板（按^C等效）。不过
提取文件时只会提取当前光标选中那1个文件。Log一样也加入键盘快捷键，并按习惯分配为
^A=全选，^C=复制，^N=清除

2007-4-21	v1.35
·小改动：复制到剪贴板的摘要增加了Banner文本，判断了Filesize是否属于被缩减过

2007-4-20	v1.34
·添加缩减分析，由于存在Application End Offset的设置不准确（甚至有的是0-_-），现
在Trimmed Size中体现为Safety size表示在End Offset后还存在有效数据，Thinner?表示
分析出来可能缩减的字节还要更多（主要发生在以0x00填充的ROM里）。在实际缩减ROM时，
会使用Saftey size的安全值来缩减，而Thinner会被无视，仍然采用End Offset所示位置。
是否进行分析由Verbose选项决定，开启分析会花更多时间来打开一个ROM，要注意这在批量
扫描时表现比较明显

2007-4-19	v1.33
·应求添加扫描子目录的功能……
·Banner Text改为默认使用日文文本，修正其它几个BUG。
·补完Publisher中

2007-4-18	v1.32
·修正几个小BUG。比如ROM文件名里意外包括空格的场合还是用引号括起来暂时解决一下。

2007-4-17	v1.31
·添加在Banner图标上右击改变透明条件和菜单键盘快捷键。其它的总之修正BUG中……
·校对了一次日版游戏的Publisher，新加入了不少。其它区域的由于偶没ROM在手头，加上
被某淫放鸽子到现在也没有data入手，只好等以后有机会再说了- -

2007-4-15	v1.3
·完成Banner图标和文本显示功能，图标可存为16色bmp位图，文本可以在6语言中切换。
小窗口不必关闭，可以继续打开其它ROM浏览-0-
有什么好的建议欢迎提出，能提供那张DS选择画面清晰图的最好XD
·双击Advance Mode中的项目会快速打开该ROM，这个应该早加上的orz

2007-4-15	v1.22
·添加ROM缩减功能，注意这些添加的功能只能在Advance Mode操作，今后也如此，所以打
开ROM时如果当前选中的是该页，会自动加入列表了
·加入安全缩减识别，貌似个别ROM并不严格……如果发现trimmed的ROM文件和Trimmed 
Size不一样的话就说明它生效了
·添加Advance Mode中的快捷键，素给用不惯纯鼠操作准备的……没有提示信息，这里说明
一下，对应工具栏从左到右为：
^N ^S  ^A ^L  ^F ^C ^X  ^H ^E ^T ^B ^I  ^P  ^O=上面的打开按钮
·完善两个“Fix”功能，觉得有必要做成批量操作的吗？

2007-4-14	v1.10
·添加Banner Unicode识别，准备进攻Banner咯
·添加Publisher新文本数据，勾上的话就会查找INI里的数据来替代ndstool的

2007-4-14	v1.00
·添加Advanced Mode中的Read NFO，直接快速用关联程序查看nfo文件。当然你关联到
msinfo32的话就没法了……
·完成File Explorer的ROM提取和创建功能
·修正了一些BUG……自己都忘了是些啥了Orz
·主要功能都大致实现了，升级1.0～ ……剩下的问题慢慢解决=v=

2007-4-12	v0.52
·修正zip包识别的一个BUG，主要是没必要，不然偶会去看PKxx的-_-

2007-4-10	v0.50
·加添了扫描ROM功能，可以批量添加ROM信息了，已经差不多过一半了，所以升到0.5
·昨天的问题原来是ndstool版本差异造成的。。。继续修正小BUG吧-_-

2007-4-9	v0.31
·完成Select Columns，定制属于你自己的表吧
·调试传说中的识别BUG-_-

2007-4-9	v0.30
·添加File Explorer基本功能
·添加zip包的加/解密及头部修复支持
·添加Advance Mode中的选择列等功能
·增加homebrew识别和部分MakerCode的识别
·修正很多都记不清了的小BUG

2007-4-7	v0.21
·添加Advanced Mode基本功能
·添加DisplayedColumns键，用于保存列表框将要显示的列标题信息
·添加大量文本资源，修正一些小BUG

2007-4-6	v0.15
·控制台日志三按钮定义为：A=选择所有，S=复制到剪贴板，C=删除选中行/清空
·添加热键切换选项卡，六个选项卡分别对应Alt+1~6

2007-4-5	v0.14
·取消Banner支持，改为SA加密/解密
·进一步完善界面，为下一个TODO做好准备- -

2007-4-4	v0.13
·修正带空格等特殊字符的长文件名识别错误
·修正几个界面BUG
·添加关联到语言的字体更改支持

2007-4-4	v0.12
·将文本资源移入NTFrontend.ini中的Language节，提供简单的多语言支持
·添加将Header信息摘要一键复制到剪贴板
·添加修复Header CRC功能

2007-4-3	v0.1
·初级测试版本
==========================================